
var Engine;Engine={keysDown:{},animate:function(){var t,e,n;return null!=(t=window.prototype).requestAnimationFrame?(t=window.prototype).requestAnimationFrame:t.requestAnimationFrame=null!=(e=window.prototype).webkitRequestAnimationFrame?(e=window.prototype).webkitRequestAnimationFrame:e.webkitRequestAnimationFrame=null!=(n=window.prototype).mozRequestAnimationFrame?(n=window.prototype).mozRequestAnimationFrame:n.mozRequestAnimationFrame=function(t){return window.setTimeout(t,1e3/60)}},init:function(t,e){var n;return this.setListeners(),this.canvas=document.createElement("canvas"),document.body.appendChild(this.canvas),this.canvas.width=this.canvasW=t,this.canvas.height=this.canvasH=e,this.ctx=null!=(n=this.canvas)?"function"==typeof n.getContext?n.getContext("2d"):void 0:void 0},clear:function(){return this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,this.canvasW,this.canvasH)},setListeners:function(){var t=this;return window.addEventListener("keydown",function(e){return t.keysDown[e.keyCode]=!0}),window.addEventListener("keyup",function(e){return delete t.keysDown[e.keyCode]})}};
var Paddle;Paddle=function(){function t(t,i,e,h){this.x=t,this.y=i,this.width=e,this.height=h,this.x_speed=0,this.y_speed=0}return t.prototype.render=function(){return Engine.ctx.fillStyle="#fff",Engine.ctx.fillRect(this.x,this.y,this.width,this.height)},t.prototype.move=function(t,i){return this.x+=t,this.y+=i,this.x_speed=t,this.y_speed=i,this.y<0?(this.y=0,this.y_speed=0):this.y+this.height>Engine.canvasH?(this.y=Engine.canvasH-this.height,this.y_speed=0):void 0},t}();
var Player,_ref,__hasProp={}.hasOwnProperty,__extends=function(r,t){function e(){this.constructor=r}for(var o in t)__hasProp.call(t,o)&&(r[o]=t[o]);return e.prototype=t.prototype,r.prototype=new e,r.__super__=t.prototype,r};Player=function(r){function t(){return _ref=t.__super__.constructor.apply(this,arguments)}return __extends(t,r),t.prototype.update=function(){var r,t,e;e=[];for(r in Engine.keysDown)t=Number(r),38===t?e.push(this.move(0,-4)):40===t?e.push(this.move(0,4)):e.push(this.move(0,0));return e},t}(Paddle);
var CPU,_ref,__hasProp={}.hasOwnProperty,__extends=function(t,r){function e(){this.constructor=t}for(var o in r)__hasProp.call(r,o)&&(t[o]=r[o]);return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t};CPU=function(t){function r(){return _ref=r.__super__.constructor.apply(this,arguments)}return __extends(r,t),r.prototype.update=function(t){var r,e;return e=t.y,r=-(this.y+this.height/2-(e+t.height/2)),0>r&&-10>r?r=-10:r>0&&r>10&&(r=10),this.move(0,r)},r}(Paddle);
var Ball;Ball=function(){function t(t,i,s,h){this.x=t,this.y=i,this.width=s,this.height=h,this.x_speed=3,this.y_speed=0}return t.prototype.render=function(){return Engine.ctx.fillStyle="#fff",Engine.ctx.fillRect(this.x,this.y,this.width,this.height)},t.prototype.update=function(t,i){return this.x+=this.x_speed,this.y+=this.y_speed,this.y<0&&(this.y_speed*=-1),this.y+this.height>Engine.canvasH&&(this.y_speed*=-1),this.x<=t.x+t.width&&this.x>t.x&&this.y>=t.y&&this.y<t.y+t.height&&(this.x_speed*=-1,this.y_speed+=t.y_speed/2),this.x+this.width>Engine.canvasW&&this.reset(),this.x+this.width>i.x&&this.x+this.width<i.x+i.width&&this.y>=i.y&&this.y<i.y+i.height&&(this.x_speed*=-1,this.y_speed+=i.y_speed/2),this.x<0?this.reset():void 0},t.prototype.reset=function(){return this.x_speed=3,this.y_speed=0,this.x=Engine.canvasW/2,this.y=Engine.canvasH/2},t}();
var Game;Game={gameW:600,gameH:400,init:function(){var e,t;return t=20,e=100,Engine.init(this.gameW,this.gameH),this.ball=new Ball(this.gameW/2-t/2,this.gameH/2-t/2,t,t),this.player=new Player(20,this.gameH/2-e/2,t,e),this.cpu=new CPU(560,this.gameH/2-e/2,t,e),Game.loop()},update:function(){return this.player.update(),this.cpu.update(this.ball),this.ball.update(this.player,this.cpu)},draw:function(){return Engine.clear(),this.drawNet(),this.player.render(),this.cpu.render(),this.ball.render()},drawNet:function(){var e,t;for(e=-15,t=[];e<this.gameH;)Engine.ctx.fillStyle="#fff",Engine.ctx.fillRect(this.gameW/2-5,e,10,30),t.push(e+=40);return t},loop:function(){return Game.update(),Game.draw(),Engine.animate(Game.loop)}},Game.init();
