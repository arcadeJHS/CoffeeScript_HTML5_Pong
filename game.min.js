
var Engine;Engine={keysDown:{},animate:function(t){return window.setTimeout(t,1e3/60)},init:function(t,n){var e;return this.setListeners(),this.canvas=document.createElement("canvas"),document.body.appendChild(this.canvas),this.canvas.width=this.canvasW=t,this.canvas.height=this.canvasH=n,this.ctx=null!=(e=this.canvas)?"function"==typeof e.getContext?e.getContext("2d"):void 0:void 0},clear:function(){return this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,this.canvasW,this.canvasH)},setListeners:function(){var t=this;return window.addEventListener("keydown",function(n){return t.keysDown[n.keyCode]=!0}),window.addEventListener("keyup",function(n){return delete t.keysDown[n.keyCode]})},drawCRT:function(t,n,e,i){var s;for(s=[];i>n;)Engine.ctx.fillRect(t,n,e,1),s.push(n+=2);return s}};
var Court;Court={init:function(t,e){return this.net_jump=10,this.net_y=this.net_jump,this.net_width=5,this.net_step_length=10,this.gameW=t,this.gameH=e},render:function(){var t,e;for(Engine.ctx.fillStyle="#fff",t=this.net_y,e=[];t<this.gameH;)Engine.drawCRT(this.gameW/2-this.net_width,t,this.net_width,t+this.net_step_length),e.push(t+=this.net_step_length+this.net_jump);return e}};
var Paddle;Paddle=function(){function t(t,i,h,e){this.x=t,this.y=i,this.width=h,this.height=e,this.x_speed=0,this.y_speed=0}return t.prototype.render=function(){return Engine.ctx.fillStyle="#fff",Engine.drawCRT(this.x,this.y,this.width,this.y+this.height)},t.prototype.move=function(t,i){return this.x+=t,this.y+=i,this.x_speed=t,this.y_speed=i,this.y<0?(this.y=0,this.y_speed=0):this.y+this.height>Engine.canvasH?(this.y=Engine.canvasH-this.height,this.y_speed=0):void 0},t}();
var Player,_ref,__hasProp={}.hasOwnProperty,__extends=function(r,t){function e(){this.constructor=r}for(var o in t)__hasProp.call(t,o)&&(r[o]=t[o]);return e.prototype=t.prototype,r.prototype=new e,r.__super__=t.prototype,r};Player=function(r){function t(){return _ref=t.__super__.constructor.apply(this,arguments)}return __extends(t,r),t.prototype.update=function(){var r,t,e;e=[];for(r in Engine.keysDown)t=Number(r),38===t?e.push(this.move(0,-4)):40===t?e.push(this.move(0,4)):e.push(this.move(0,0));return e},t}(Paddle);
var CPU,_ref,__hasProp={}.hasOwnProperty,__extends=function(t,r){function e(){this.constructor=t}for(var o in r)__hasProp.call(r,o)&&(t[o]=r[o]);return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t};CPU=function(t){function r(){return _ref=r.__super__.constructor.apply(this,arguments)}return __extends(r,t),r.prototype.update=function(t){var r,e;return e=t.y,r=-(this.y+this.height/2-(e+t.height/2)),0>r&&-10>r?r=-10:r>0&&r>10&&(r=10),this.move(0,r)},r}(Paddle);
var Ball;Ball=function(){function t(t,i,s,h){this.x=t,this.y=i,this.width=s,this.height=h,this.x_speed=3,this.y_speed=0}return t.prototype.render=function(){return Engine.ctx.fillStyle="#fff",Engine.drawCRT(this.x,this.y,this.width,this.y+this.height)},t.prototype.update=function(t,i){return this.x+=this.x_speed,this.y+=this.y_speed,this.y<0&&(this.y_speed*=-1),this.y+this.height>Engine.canvasH&&(this.y_speed*=-1),this.x<=t.x+t.width&&this.x>t.x&&this.y>=t.y&&this.y<t.y+t.height&&(this.x_speed*=-1,this.y_speed+=t.y_speed/2),this.x+this.width>Engine.canvasW&&this.reset(),this.x+this.width>i.x&&this.x+this.width<i.x+i.width&&this.y>=i.y&&this.y<i.y+i.height&&(this.x_speed*=-1,this.y_speed+=i.y_speed/2),this.x<0?this.reset():void 0},t.prototype.reset=function(){return this.x_speed=3,this.y_speed=0,this.x=Engine.canvasW/2,this.y=Engine.canvasH/2},t}();
var Game;Game={gameW:750,gameH:510,init:function(){var e,t;return t=10,e=32,Engine.init(this.gameW,this.gameH),Court.init(this.gameW,this.gameH),this.ball=new Ball(this.gameW/2-t/2,this.gameH/2-t/2,10,10),this.player=new Player(100,this.gameH/2-e/2,t,e),this.cpu=new CPU(this.gameW-100-t,this.gameH/2-e/2,t,e),Game.loop()},update:function(){return this.player.update(),this.cpu.update(this.ball),this.ball.update(this.player,this.cpu)},draw:function(){return Engine.clear(),Court.render(),this.player.render(),this.cpu.render(),this.ball.render()},loop:function(){return Game.update(),Game.draw(),Engine.animate(Game.loop)}},Game.init();